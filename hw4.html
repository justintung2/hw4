
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>HW4</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
  </head>
  <body>
    <script>
      var margin = {top: 20, right: 120, bottom: 20, left: 120},
      width = 960 - margin.right - margin.left,
      height = 800 - margin.top - margin.bottom;

      var treemap = d3.tree().size([height, width]);

      var svg = d3.select("body").append("svg")
                  .attr("width", width + margin.right + margin.left)
                  .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                  .attr("transform", "translate("
                        + margin.left + "," + margin.top + ")");

      d3.csv("Yelp-Pittsburgh.m.csv", function(data) {
        data.forEach(function(d) {
          d.latitude = +d.latitude;
          d.longitude = +d.longitude;
          d.rating = +d.rating;
          d["review count"] = +d["review count"];
        });

        var nested = d3.nest()
                    .key(function(d) { if (d.type == 'food') return d.type; })
                    .key(function(d) { return d.category; })
                    .entries(data);

        console.log(nested);

        
      });
    </script>
  </body>
</html>